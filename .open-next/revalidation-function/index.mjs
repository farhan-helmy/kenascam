globalThis.openNextDebug = false;globalThis.openNextVersion = "2.3.1";
import c from"node:fs";import f from"node:https";import l from"node:path";function a(...e){globalThis.openNextDebug&&console.log(...e)}function i(...e){console.error(...e)}var g=u(),v=async e=>{for(let r of e.Records){let{host:o,url:n}=JSON.parse(r.body);a("Revalidating stale page",{host:o,url:n}),await new Promise((p,d)=>{let s=f.request(`https://${o}${n}`,{method:"HEAD",headers:{"x-prerender-revalidate":g.preview.previewModeId,"x-isr":"1"}},t=>p(t));s.on("error",t=>{i("Error revalidating page",{host:o,url:n}),d(t)}),s.end()})}};function u(){let e=l.join("prerender-manifest.json"),r=c.readFileSync(e,"utf-8");return JSON.parse(r)}export{v as handler};
